# å“ˆå¸Œè¡¨åŸç†åŠåº”ç”¨

## å“ˆå¸Œè¡¨æ ¸å¿ƒåŸç†
+ å“ˆå¸Œè¡¨ + æ•°ç»„ = ArrayHashMapã€å“ˆå¸Œè¡¨ + åŒé“¾è¡¨ = LinkedHashMap
+ **å“ˆå¸Œè¡¨å’ŒMapä¸ä¸€æ ·** -  æ ¹æ®åº•å±‚æ•°æ®ç»“æ„ä¸åŒï¼Œmapçš„å¤æ‚åº¦ä¸ä¸€å®šéƒ½æ˜¯O(1)
+ keyä¸ºå”¯ä¸€ï¼Œvalueå¯ä»¥é‡å¤
+ å“ˆå¸Œå‡½æ•°æ˜¯æŠŠä»»æ„é•¿åº¦çš„éæ•´æ•°ç±»å‹è¾“å…¥ï¼ˆkeyï¼‰â†’ å›ºå®šé•¿åº¦çš„æ•´æ•°è¾“å‡ºï¼ˆç´¢å¼•ï¼‰
  + è¿™ä¸ªå‡½æ•°çš„æ€§èƒ½å¾ˆå…³é”®ï¼Œå¦‚æœè¿™ä¸ªå“ˆå¸Œå‡½æ•°å¤æ‚åº¦æ˜¯O(N)ï¼Œé‚£ä¹ˆå“ˆå¸Œè¡¨çš„å¢åˆ æŸ¥æ”¹æ€§èƒ½å°±ä¼šé€€åŒ–æˆO(N)
  + è¿™ä¸ªå‡½æ•°è¿˜è¦ä¿è¯çš„ä¸€ç‚¹æ˜¯ï¼Œè¾“å…¥ç›¸åŒçš„keyï¼Œè¾“å‡ºä¹Ÿå¿…é¡»è¦ç›¸åŒï¼Œè¿™æ ·æ‰èƒ½ä¿è¯å“ˆå¸Œè¡¨çš„æ­£ç¡®æ€§ã€‚
    > ç¤ºä¾‹ Javaï¼šå…¨å±€å”¯ä¸€å†…å­˜åœ°å€ è´Ÿè½½å› å­ï¼š0.75
    > + intï¼ˆ[-2Â³Â¹, 2Â³Â¹ âˆ’ 1]ï¼‰å¯èƒ½ä¸ºè´Ÿæ•°
    > + ç”¨ % æ¥ä¿è¯ç´¢å¼•æ°¸è¿œè½åœ¨æ•°ç»„çš„åˆæ³•èŒƒå›´
  
### å“ˆå¸Œå†²çª
0. å“ˆå¸Œæ¡¶ - ç´¢å¼•ä½ç½®çš„å­˜å‚¨å•å…ƒ
1. çºµå‘å»¶ä¼¸ - æ‹‰é“¾æ³•ï¼ˆSeparate Chainingï¼‰ O(k)ä¸ºé“¾è¡¨é•¿åº¦
2. æ¨ªå‘å»¶ä¼¸ - å¼€æ”¾å¯»å€æ³•ï¼ˆOpen Addressingï¼‰ O(k)ä¸ºè¿ç»­æ¢æŸ¥çš„æ¬¡æ•°

+ è´Ÿè½½å› å­ 
  + å“ˆå¸Œè¡¨è£…æ»¡çš„ç¨‹åº¦ï¼Œ= size / table.length
  + å“ˆå¸Œè¡¨å†…å…ƒç´ è¾¾åˆ°è´Ÿè½½å› å­æ—¶ï¼Œå“ˆå¸Œè¡¨ä¼šè‡ªåŠ¨æ‰©å®¹ã€‚

+ å“ˆå¸Œè¡¨ä¸­é”®çš„éå†é¡ºåºæ˜¯æ— åºçš„
  + key åœ¨åº•å±‚ table æ•°ç»„ä¸­çš„åˆ†å¸ƒæ˜¯éšæœºçš„
  + åœ¨æ‰©å®¹çš„æ—¶å€™ç´¢å¼•å‘ç”Ÿå˜åŒ–
  
+ keyå¿…é¡»ä¸ºä¸å¯å˜ç±»å‹
  + å¤æ‚åº¦é€€åŒ–åˆ°O(n)
  + ä¸¢å¤±ä¼šå¯¼è‡´å†…å­˜æ³„æ¼

### å“ˆå¸Œè¡¨åŸºæœ¬API
```
interface Map<K, V> {
    // è·å– key å¯¹åº”çš„ valueï¼Œæ—¶é—´å¤æ‚åº¦ O(1)
    V get(K key);

    // æ·»åŠ /ä¿®æ”¹ key-value å¯¹ï¼Œæ—¶é—´å¤æ‚åº¦ O(1)
    void put(K key, V value);

    // åˆ é™¤ key-value å¯¹ï¼Œæ—¶é—´å¤æ‚åº¦ O(1)
    void remove(K key);

    // æ˜¯å¦åŒ…å« keyï¼Œæ—¶é—´å¤æ‚åº¦ O(1)
    boolean containsKey(K key);

    // è¿”å›æ‰€æœ‰ keyï¼Œæ—¶é—´å¤æ‚åº¦ O(N)
    List<K> keys();
}
```

## ğŸ”’é“¾è¡¨åŠ å¼ºå“ˆå¸Œè¡¨ï¼ˆLinkedHashMapï¼‰
+ å“ˆå¸Œè¡¨çš„éå†é¡ºåºä¸å¯é 
  + Golangçš„å“ˆå¸Œè¡¨éå†ç»“æœä¸ºéšæœºï¼ˆä¼ªéšæœº - å¤´å…ƒç´ éšæœºï¼Œç¯å½¢éå†ï¼‰
  + python 3.7+ï¼Œå“ˆå¸Œè¡¨dictçš„éå†é¡ºåºå°±æ˜¯æ’å…¥é¡ºåºï¼ˆå“ˆå¸Œé“¾è¡¨ï¼‰

### å“ˆå¸Œé“¾è¡¨ï¼ˆLinkedHashMapï¼‰
**å“ˆå¸Œè¡¨æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªé”®å€¼æ˜ å°„ï¼Œé“¾è¡¨æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªé¡ºåºå­˜å‚¨å…ƒç´ çš„å®¹å™¨ã€‚**
+ é€šè¿‡å“ˆå¸Œé“¾è¡¨ç»“æ„
  + æŸ¥ O(1)
  + å¤´å°¾æ’å…¥ O(1)
  + å®šèŠ‚ç‚¹åˆ é™¤ O(1)
  + éå†é¡ºåºå³æ’å…¥é¡ºåº
  > æ™®é€šé“¾è¡¨çš„åˆ é™¤æ˜¯O(n)ï¼šå› ä¸ºéœ€è¦å…ˆæ‰¾åˆ°è¦åˆ çš„èŠ‚ç‚¹
  > å“ˆå¸Œé“¾è¡¨çš„åˆ é™¤æ˜¯O(1)ï¼šç»™å®šåŒé“¾è¡¨èŠ‚ç‚¹åˆ é™¤æ“ä½œï¼Œå› ä¸ºå“ˆå¸Œè¡¨å¯ä»¥ç›´æ¥ç»™å‡ºèŠ‚ç‚¹ä½ç½®

### ä»£ç å®ç°
``` python
class MyLinkedHashMap:
# èŠ‚ç‚¹ç»“æ„å®šä¹‰
    class Node:
        def __init__(self, key, val):
            self.key = key
            self.val = val
            self.next = None
            self.prev = None

# LinkedHashMapç»“æ„å®šä¹‰
    def __init__(self):
        self.head = self.Node(None, None)
        self.tail = self.Node(None, None)
        # åŒå‘ç©ºé“¾è¡¨æ„å»ºï¼Œhead <-> tail
        self.head.next = self.tail
        self.tail.prev = self.head
        self.map = dict()

# CRUD apiï¼ˆget, put, removeï¼‰
    def get(self, key):
        if key not in self.map:
            return None
        return self.map[key].val

    def put(self, key, val):
        # è‹¥ä¸ºæ–°æ’å…¥çš„èŠ‚ç‚¹ï¼Œåˆ™åŒæ—¶æ’å…¥é“¾è¡¨å’Œ map
        if key not in self.map:
            # æ’å…¥æ–°çš„ Node
            node = self.Node(key, val)
            self.add_last_node(node)
            self.map[key] = node
            return
        # è‹¥å­˜åœ¨ï¼Œåˆ™æ›¿æ¢ä¹‹å‰çš„ val
        self.map[key].val = val

    def remove(self, key):
        # è‹¥ key æœ¬ä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å›
        if key not in self.map:
            return
        # è‹¥ key å­˜åœ¨ï¼Œåˆ™éœ€è¦åŒæ—¶åœ¨å“ˆå¸Œè¡¨å’Œé“¾è¡¨ä¸­åˆ é™¤
        node = self.map[key]
        del self.map[key]
        self.remove_node(node)

    def contains_key(self, key):
        return key in self.map

    def keys(self):
        key_list = []
        p = self.head.next
        while p != self.tail:
            key_list.append(p.key)
            p = p.next
        return key_list

    def add_last_node(self, x):
        temp = self.tail.prev
        # temp <-> tail

        x.next = self.tail
        x.prev = temp
        # temp <- x -> tail

        temp.next = x
        self.tail.prev = x
        # temp <-> x <-> tail

    def remove_node(self, x):
        prev = x.prev
        next = x.next
        # prev <-> x <-> next

        prev.next = next
        next.prev = prev

        x.next = x.prev = None


if __name__ == '__main__':
    map = MyLinkedHashMap()
    map.put("a", 1)
    map.put("b", 2)
    map.put("c", 3)
    map.put("d", 4)
    map.put("e", 5)

    print(map.keys())  # ['a', 'b', 'c', 'd', 'e']
    map.remove("c")
    print(map.keys())  # ['a', 'b', 'd', 'e']
```

## ğŸ”’æ•°ç»„åŠ å¼ºå“ˆå¸Œè¡¨ï¼ˆArrayHashMapï¼‰
### randomKey() API
+ æ–°å¢APIï¼šéšæœºè¿”å›ä¸€ä¸ª keyï¼Œè¦æ±‚æ—¶é—´å¤æ‚åº¦ O(1) --- æ•°ç»„å®ç°
+ ç›´æ¥ä½¿ç”¨ä¸€æ¬¡æˆ–å¤šæ¬¡random()çš„å¼Šç«¯
  + éšæœºå¼•ç”¨å¯èƒ½ä¸ºç©º
  + å¤æ‚åº¦ä¸Šå‡åˆ°O(n)
  + æ‹‰é“¾æ³•ä¸­çš„éšæœºä¸ä¸ºå‡åŒ€éšæœº